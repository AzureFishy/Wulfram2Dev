
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the Wulfram 2 server restoration project">
      
      
      
      
        <link rel="prev" href="part-4-4-vehicle-type-data.html">
      
      
        <link rel="next" href="part-4-6-packet-finalization.html">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>Physics Tables Vehicle Models - Wulfram 2 Server Implementation Guide</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#wulfram-2-server-implementation-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="Wulfram 2 Server Implementation Guide" class="md-header__button md-logo" aria-label="Wulfram 2 Server Implementation Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Wulfram 2 Server Implementation Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Physics Tables Vehicle Models
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Wulfram 2 Server Implementation Guide" class="md-nav__button md-logo" aria-label="Wulfram 2 Server Implementation Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Wulfram 2 Server Implementation Guide
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../part-0-getting-started/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-1-introduction/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 1.0 - Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-2-hello-handshake/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 2.0 - HELLO Handshake
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-3-login-authentication/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 3.0 - Login Authentication
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    BEHAVIOR Packet
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            BEHAVIOR Packet
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="part-4-1-fixed-header.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 4.1 - Fixed Header
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="part-4-2-entity-weapon-data.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 4.2 - Entity Weapon Data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="part-4-3-entity-core-stats.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 4.3 - Entity Core Stats
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="part-4-4-vehicle-type-data.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 4.4 - Vehicle Type Data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Part 4.5 - Physics Tables
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="part-4-5-physics-tables.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Part 4.5 - Physics Tables
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#part-4-5-behavior-packet-physics-tables-vehicle-models" class="md-nav__link">
    <span class="md-ellipsis">
      Part 4-5: BEHAVIOR Packet - Physics Tables + Vehicle Models
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Part 4-5: BEHAVIOR Packet - Physics Tables + Vehicle Models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-handler-code" class="md-nav__link">
    <span class="md-ellipsis">
      The Handler Code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-1-physics-tables" class="md-nav__link">
    <span class="md-ellipsis">
      Part 1: Physics Tables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#physics-table-wire-format" class="md-nav__link">
    <span class="md-ellipsis">
      Physics Table Wire Format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-2-vehicle-models" class="md-nav__link">
    <span class="md-ellipsis">
      Part 2: Vehicle Models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vehicle-model-1-tank-28-bytes" class="md-nav__link">
    <span class="md-ellipsis">
      Vehicle Model 1: Tank (28 bytes)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vehicle-model-2-medicscout-36-bytes" class="md-nav__link">
    <span class="md-ellipsis">
      Vehicle Model 2: Medic/Scout (36 bytes)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vehicle-model-3-bomber-44-bytes" class="md-nav__link">
    <span class="md-ellipsis">
      Vehicle Model 3: Bomber (44 bytes)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#section-size-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      Section Size Calculation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-flow-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      Data Flow Diagram
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-section-5-in-python" class="md-nav__link">
    <span class="md-ellipsis">
      Building Section 5 in Python
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simplified-version-all-defaults" class="md-nav__link">
    <span class="md-ellipsis">
      Simplified Version (All Defaults)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-section-5-bytes-minimum-valid" class="md-nav__link">
    <span class="md-ellipsis">
      Example Section 5 Bytes (Minimum Valid)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vehicle-model-summary" class="md-nav__link">
    <span class="md-ellipsis">
      Vehicle Model Summary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-mistakes" class="md-nav__link">
    <span class="md-ellipsis">
      Common Mistakes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verification-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      Verification Checklist
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#section-summary" class="md-nav__link">
    <span class="md-ellipsis">
      Section Summary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cumulative-offset-after-section-5" class="md-nav__link">
    <span class="md-ellipsis">
      Cumulative Offset After Section 5
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complete-behavior-packet-size" class="md-nav__link">
    <span class="md-ellipsis">
      Complete BEHAVIOR Packet Size
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#after-behavior-byte-alignment" class="md-nav__link">
    <span class="md-ellipsis">
      After BEHAVIOR: Byte Alignment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="part-4-6-packet-finalization.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 4.6 - Packet Finalization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="part-4-7-post-behavior-flow.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 4.7 - Post BEHAVIOR Flow
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../part-0-game-state/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Game State
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Game State
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-5-team-info/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 5.0 - TEAM INFO
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-6-reincarnate/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 6.0 - REINCARNATE
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-7-update-array/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 7.0 - UPDATE ARRAY
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../part-8-structures/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Structures
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Structures
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-8-structures/add-to-roster.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 8.1 - ADD_TO_ROSTER
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-8-structures/birth-notice.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 8.2 - BIRTH_NOTICE
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-8-structures/update-stats.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 8.3 - UPDATE_STATS
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../part-9-udp-protocol/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    UDP Protocol
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            UDP Protocol
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-9-udp-protocol/protocol-overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 9.1 - PROTOCOL OVERVIEW
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-9-udp-protocol/graph.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 9.2 - GRAPH Data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-9-udp-protocol/priority.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 9.3 - PRIORITY Updates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-9-udp-protocol/voice.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 9.4 - VOICE
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-9-udp-protocol/weapons.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 9.5 - WEAPONS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-9-udp-protocol/d-handshake.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 9.6 - D-HANDSHAKE
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../part-11-tcp-protocol/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    TCP Protocol
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            TCP Protocol
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../part-10-reference-files/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Reference Tables
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Reference Tables
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#part-4-5-behavior-packet-physics-tables-vehicle-models" class="md-nav__link">
    <span class="md-ellipsis">
      Part 4-5: BEHAVIOR Packet - Physics Tables + Vehicle Models
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Part 4-5: BEHAVIOR Packet - Physics Tables + Vehicle Models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-handler-code" class="md-nav__link">
    <span class="md-ellipsis">
      The Handler Code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-1-physics-tables" class="md-nav__link">
    <span class="md-ellipsis">
      Part 1: Physics Tables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#physics-table-wire-format" class="md-nav__link">
    <span class="md-ellipsis">
      Physics Table Wire Format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-2-vehicle-models" class="md-nav__link">
    <span class="md-ellipsis">
      Part 2: Vehicle Models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vehicle-model-1-tank-28-bytes" class="md-nav__link">
    <span class="md-ellipsis">
      Vehicle Model 1: Tank (28 bytes)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vehicle-model-2-medicscout-36-bytes" class="md-nav__link">
    <span class="md-ellipsis">
      Vehicle Model 2: Medic/Scout (36 bytes)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vehicle-model-3-bomber-44-bytes" class="md-nav__link">
    <span class="md-ellipsis">
      Vehicle Model 3: Bomber (44 bytes)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#section-size-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      Section Size Calculation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-flow-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      Data Flow Diagram
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-section-5-in-python" class="md-nav__link">
    <span class="md-ellipsis">
      Building Section 5 in Python
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simplified-version-all-defaults" class="md-nav__link">
    <span class="md-ellipsis">
      Simplified Version (All Defaults)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-section-5-bytes-minimum-valid" class="md-nav__link">
    <span class="md-ellipsis">
      Example Section 5 Bytes (Minimum Valid)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vehicle-model-summary" class="md-nav__link">
    <span class="md-ellipsis">
      Vehicle Model Summary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-mistakes" class="md-nav__link">
    <span class="md-ellipsis">
      Common Mistakes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verification-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      Verification Checklist
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#section-summary" class="md-nav__link">
    <span class="md-ellipsis">
      Section Summary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cumulative-offset-after-section-5" class="md-nav__link">
    <span class="md-ellipsis">
      Cumulative Offset After Section 5
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complete-behavior-packet-size" class="md-nav__link">
    <span class="md-ellipsis">
      Complete BEHAVIOR Packet Size
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#after-behavior-byte-alignment" class="md-nav__link">
    <span class="md-ellipsis">
      After BEHAVIOR: Byte Alignment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="wulfram-2-server-implementation-guide">Wulfram 2 Server Implementation Guide<a class="headerlink" href="#wulfram-2-server-implementation-guide" title="Permanent link">&para;</a></h1>
<h2 id="part-4-5-behavior-packet-physics-tables-vehicle-models">Part 4-5: BEHAVIOR Packet - Physics Tables + Vehicle Models<a class="headerlink" href="#part-4-5-behavior-packet-physics-tables-vehicle-models" title="Permanent link">&para;</a></h2>
<hr />
<h3 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h3>
<p>The Physics Tables + Vehicle Models section is the <strong>fifth and final data section</strong> of the BEHAVIOR packet. It contains physics lookup tables used for game simulation and per-vehicle-model configuration parameters.</p>
<blockquote>
<p><strong>Critical Note</strong>: This section is often overlooked, but <strong>the client will read garbage data</strong> if it's missing or undersized, leading to corrupted physics and vehicle behavior.</p>
</blockquote>
<div class="highlight"><pre><span></span><code>Position in BEHAVIOR Packet:
┌─────────────────────────────────────────────────────────────────────────┐
│  SECTION 1: Fixed Header (95 bytes)                        ✓ Complete  │
│  SECTION 2: Entity Weapon Data (2,340 bytes)               ✓ Complete  │
│  SECTION 3: Entity Core Stats (468 bytes)                  ✓ Complete  │
│  SECTION 4: Vehicle Type Data (72 bytes)                   ✓ Complete  │
├─────────────────────────────────────────────────────────────────────────┤
│  SECTION 5: Physics Tables + Vehicle Models (140+ bytes)   ◄ YOU ARE   │
│             4 physics tables + 3 vehicle models                HERE    │
├─────────────────────────────────────────────────────────────────────────┤
│  PACKET FINALIZATION: Byte Alignment (0-7 bits padding)                │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>
<hr />
<h3 id="the-handler-code">The Handler Code<a class="headerlink" href="#the-handler-code" title="Permanent link">&para;</a></h3>
<p>From FUN_004e9630 (lines 160966-160980):</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">FUN_004e9630</span><span class="p">(</span><span class="n">undefined4</span><span class="w"> </span><span class="n">param_1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">undefined4</span><span class="w"> </span><span class="o">*</span><span class="n">puVar1</span><span class="p">;</span>
<span class="w">    </span><span class="n">undefined4</span><span class="w"> </span><span class="o">*</span><span class="n">puVar2</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// ═══════════════════════════════════════════════════════════</span>
<span class="w">    </span><span class="c1">// PART 1: Read Physics Tables</span>
<span class="w">    </span><span class="c1">// ═══════════════════════════════════════════════════════════</span>
<span class="w">    </span><span class="n">FUN_004df690</span><span class="p">(</span><span class="n">param_1</span><span class="p">);</span><span class="w">              </span><span class="c1">// Reads 4 physics tables</span>

<span class="w">    </span><span class="c1">// ═══════════════════════════════════════════════════════════</span>
<span class="w">    </span><span class="c1">// PART 2: Read Vehicle Models</span>
<span class="w">    </span><span class="c1">// ═══════════════════════════════════════════════════════════</span>
<span class="w">    </span><span class="n">puVar2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DAT_005c41c8</span><span class="p">;</span><span class="w">              </span><span class="c1">// Get vehicle model linked list</span>

<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">puVar2</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="p">(</span><span class="n">undefined4</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="mh">0x0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">puVar1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">undefined4</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="o">*</span><span class="n">puVar2</span><span class="p">;</span><span class="w">                      </span><span class="c1">// Next pointer</span>
<span class="w">        </span><span class="p">(</span><span class="o">**</span><span class="p">(</span><span class="n">code</span><span class="w"> </span><span class="o">**</span><span class="p">)(</span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">puVar2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x10</span><span class="p">))(</span><span class="n">param_1</span><span class="p">);</span><span class="w">    </span><span class="c1">// Call vtable[0x10]</span>
<span class="w">        </span><span class="n">puVar2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">puVar1</span><span class="p">;</span><span class="w">                                      </span><span class="c1">// Move to next</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h3 id="part-1-physics-tables">Part 1: Physics Tables<a class="headerlink" href="#part-1-physics-tables" title="Permanent link">&para;</a></h3>
<h4 id="physics-table-dispatcher-fun_004df690">Physics Table Dispatcher (FUN_004df690)<a class="headerlink" href="#physics-table-dispatcher-fun_004df690" title="Permanent link">&para;</a></h4>
<p>From FUN_004df690 (lines 152925-152931):</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">FUN_004df690</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">FUN_004df5c0</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w">    </span><span class="c1">// Read 2 physics tables for index 0</span>
<span class="w">    </span><span class="n">FUN_004df5c0</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w">    </span><span class="c1">// Read 2 physics tables for index 1</span>
<span class="w">    </span><span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Each call to <code>FUN_004df5c0</code> reads <strong>2 physics tables</strong>, for a total of <strong>4 physics tables</strong>.</p>
<h4 id="physics-table-pair-reader-fun_004df5c0">Physics Table Pair Reader (FUN_004df5c0)<a class="headerlink" href="#physics-table-pair-reader-fun_004df5c0" title="Permanent link">&para;</a></h4>
<p>From FUN_004df5c0 (lines 152872-152921):</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">FUN_004df5c0</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">puVar1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">undefined4</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">FUN_004de690</span><span class="p">();</span><span class="w">   </span><span class="c1">// Get physics context</span>
<span class="w">    </span><span class="n">_Memory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">FUN_004df500</span><span class="p">();</span><span class="w">         </span><span class="c1">// Read physics table 1</span>
<span class="w">    </span><span class="n">_Memory_00</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">FUN_004df500</span><span class="p">();</span><span class="w">      </span><span class="c1">// Read physics table 2</span>

<span class="w">    </span><span class="c1">// ... stores tables in physics context ...</span>

<span class="w">    </span><span class="n">FUN_004de6f0</span><span class="p">();</span><span class="w">                            </span><span class="c1">// Finalize context</span>
<span class="w">    </span><span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="single-physics-table-reader-fun_004df500">Single Physics Table Reader (FUN_004df500)<a class="headerlink" href="#single-physics-table-reader-fun_004df500" title="Permanent link">&para;</a></h4>
<p>From FUN_004df500 (lines 152833-152868):</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nf">FUN_004df500</span><span class="p">(</span><span class="n">undefined4</span><span class="w"> </span><span class="n">param_1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">FUN_004e5080</span><span class="p">();</span><span class="w">                       </span><span class="c1">// Initialize context</span>
<span class="w">    </span><span class="n">FUN_004e5090</span><span class="p">(</span><span class="n">param_1</span><span class="p">);</span><span class="w">                </span><span class="c1">// Set context pointer</span>

<span class="w">    </span><span class="c1">// ─────────────────────────────────────────────────────────</span>
<span class="w">    </span><span class="c1">// Read entry count (uint32 big-endian)</span>
<span class="w">    </span><span class="c1">// ─────────────────────────────────────────────────────────</span>
<span class="w">    </span><span class="n">FUN_00509310</span><span class="p">(</span><span class="o">&amp;</span><span class="n">local_c</span><span class="p">);</span><span class="w">               </span><span class="c1">// 4 bytes: entry count</span>

<span class="w">    </span><span class="n">pvVar1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">operator_new</span><span class="p">(</span><span class="mh">0xa0</span><span class="p">);</span><span class="w">          </span><span class="c1">// Allocate physics table</span>
<span class="w">    </span><span class="n">FUN_004dee40</span><span class="p">(</span><span class="n">local_c</span><span class="p">);</span><span class="w">                </span><span class="c1">// Initialize with count</span>

<span class="w">    </span><span class="c1">// ─────────────────────────────────────────────────────────</span>
<span class="w">    </span><span class="c1">// Read N entries (28 bytes each)</span>
<span class="w">    </span><span class="c1">// ─────────────────────────────────────────────────────────</span>
<span class="w">    </span><span class="n">iVar2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">local_c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">iVar3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">        </span><span class="k">do</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Read first float3 (12 bytes: 3 × fixed-point)</span>
<span class="w">            </span><span class="n">FUN_004e5100</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">)((</span><span class="kt">int</span><span class="p">)</span><span class="n">pvVar1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x34</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">iVar3</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Read second float3 (12 bytes: 3 × fixed-point)</span>
<span class="w">            </span><span class="n">FUN_004e5100</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">)((</span><span class="kt">int</span><span class="p">)</span><span class="n">pvVar1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x38</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">iVar3</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Read bool flag (4 bytes: uint32)</span>
<span class="w">            </span><span class="n">FUN_00509310</span><span class="p">(</span><span class="o">&amp;</span><span class="n">local_8</span><span class="p">);</span>
<span class="w">            </span><span class="o">*</span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="o">*</span><span class="p">)(</span><span class="n">iVar2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">)((</span><span class="kt">int</span><span class="p">)</span><span class="n">pvVar1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x3c</span><span class="p">))</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">local_8</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">            </span><span class="n">iVar2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iVar2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">            </span><span class="n">iVar3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iVar3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0xc</span><span class="p">;</span><span class="w">          </span><span class="c1">// Stride = 12 bytes</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">iVar2</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">local_c</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// ─────────────────────────────────────────────────────────</span>
<span class="w">    </span><span class="c1">// Read final float (4 bytes: fixed-point)</span>
<span class="w">    </span><span class="c1">// ─────────────────────────────────────────────────────────</span>
<span class="w">    </span><span class="n">FUN_004e5170</span><span class="p">(</span><span class="o">&amp;</span><span class="n">local_4</span><span class="p">);</span><span class="w">               </span><span class="c1">// 4 bytes: final float</span>
<span class="w">    </span><span class="o">*</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="o">*</span><span class="p">)((</span><span class="kt">int</span><span class="p">)</span><span class="n">pvVar1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x90</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="n">local_4</span><span class="p">;</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">pvVar1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="float3-reader-fun_004e5100">Float3 Reader (FUN_004e5100)<a class="headerlink" href="#float3-reader-fun_004e5100" title="Permanent link">&para;</a></h4>
<p>From FUN_004e5100 (lines 157081-157097):</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">FUN_004e5100</span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="o">*</span><span class="n">param_1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">FUN_00509310</span><span class="p">(</span><span class="o">&amp;</span><span class="n">local_4</span><span class="p">);</span><span class="w">               </span><span class="c1">// Read 4 bytes (fixed-point)</span>
<span class="w">    </span><span class="n">fVar1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">float10</span><span class="p">)</span><span class="n">FUN_004dc620</span><span class="p">(</span><span class="n">local_4</span><span class="p">);</span>
<span class="w">    </span><span class="o">*</span><span class="n">param_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fVar1</span><span class="p">;</span><span class="w">              </span><span class="c1">// Store as float</span>

<span class="w">    </span><span class="n">FUN_00509310</span><span class="p">(</span><span class="o">&amp;</span><span class="n">local_4</span><span class="p">);</span><span class="w">               </span><span class="c1">// Read 4 bytes (fixed-point)</span>
<span class="w">    </span><span class="n">fVar1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">float10</span><span class="p">)</span><span class="n">FUN_004dc620</span><span class="p">(</span><span class="n">local_4</span><span class="p">);</span>
<span class="w">    </span><span class="n">param_1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fVar1</span><span class="p">;</span><span class="w">            </span><span class="c1">// Store as float</span>

<span class="w">    </span><span class="n">FUN_00509310</span><span class="p">(</span><span class="o">&amp;</span><span class="n">local_4</span><span class="p">);</span><span class="w">               </span><span class="c1">// Read 4 bytes (fixed-point)</span>
<span class="w">    </span><span class="n">fVar1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">float10</span><span class="p">)</span><span class="n">FUN_004dc620</span><span class="p">(</span><span class="n">local_4</span><span class="p">);</span>
<span class="w">    </span><span class="n">param_1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fVar1</span><span class="p">;</span><span class="w">            </span><span class="c1">// Store as float</span>
<span class="w">    </span><span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>This function reads <strong>3 consecutive fixed-point values</strong> (12 bytes total) and converts them to floats.</p>
<hr />
<h3 id="physics-table-wire-format">Physics Table Wire Format<a class="headerlink" href="#physics-table-wire-format" title="Permanent link">&para;</a></h3>
<h4 id="single-physics-table-structure">Single Physics Table Structure<a class="headerlink" href="#single-physics-table-structure" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Physics Table Wire Format:
┌───────────────┬──────────────────────────────────────────┬───────────────┐
│  Entry Count  │           Entry Data (N entries)         │  Final Float  │
│  (4 bytes BE) │         (28 bytes per entry)             │  (4 bytes FP) │
└───────────────┴──────────────────────────────────────────┴───────────────┘
</code></pre></div>
<h4 id="physics-table-entry-structure-28-bytes">Physics Table Entry Structure (28 bytes)<a class="headerlink" href="#physics-table-entry-structure-28-bytes" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Physics Table Entry Wire Format (28 bytes):
┌─────────┬──────┬────────────────┬───────────────────────────────────────────┐
│ Offset  │ Size │ Reader Func    │ Description                               │
├─────────┼──────┼────────────────┼───────────────────────────────────────────┤
│ 0-3     │ 4    │ FUN_00509310   │ Float3[0] - X component (fixed-point)     │
│ 4-7     │ 4    │ FUN_00509310   │ Float3[0] - Y component (fixed-point)     │
│ 8-11    │ 4    │ FUN_00509310   │ Float3[0] - Z component (fixed-point)     │
├─────────┼──────┼────────────────┼───────────────────────────────────────────┤
│ 12-15   │ 4    │ FUN_00509310   │ Float3[1] - X component (fixed-point)     │
│ 16-19   │ 4    │ FUN_00509310   │ Float3[1] - Y component (fixed-point)     │
│ 20-23   │ 4    │ FUN_00509310   │ Float3[1] - Z component (fixed-point)     │
├─────────┼──────┼────────────────┼───────────────────────────────────────────┤
│ 24-27   │ 4    │ FUN_00509310   │ Bool flag (uint32 BE, non-zero = true)    │
└─────────┴──────┴────────────────┴───────────────────────────────────────────┘
Total: 12 + 12 + 4 = 28 bytes per entry
</code></pre></div>
<h4 id="physics-table-size-formula">Physics Table Size Formula<a class="headerlink" href="#physics-table-size-formula" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Physics Table Size = 4 + (entry_count × 28) + 4

Examples:
  0 entries: 4 + (0 × 28) + 4 = 8 bytes
  1 entry:   4 + (1 × 28) + 4 = 36 bytes
  5 entries: 4 + (5 × 28) + 4 = 148 bytes
</code></pre></div>
<hr />
<h3 id="part-2-vehicle-models">Part 2: Vehicle Models<a class="headerlink" href="#part-2-vehicle-models" title="Permanent link">&para;</a></h3>
<h4 id="vehicle-model-registration">Vehicle Model Registration<a class="headerlink" href="#vehicle-model-registration" title="Permanent link">&para;</a></h4>
<p>The client registers exactly <strong>3 vehicle models</strong> during initialization in FUN_004e95b0 (lines 160928-160944):</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">FUN_004e95b0</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">FUN_004f9a90</span><span class="p">(</span><span class="o">&amp;</span><span class="n">DAT_005c41c4</span><span class="p">);</span><span class="w">    </span><span class="c1">// Register Tank_Model</span>
<span class="w">    </span><span class="n">FUN_004f6e50</span><span class="p">(</span><span class="o">&amp;</span><span class="n">DAT_005c41c4</span><span class="p">);</span><span class="w">    </span><span class="c1">// Register Medic_Model</span>
<span class="w">    </span><span class="n">FUN_00501530</span><span class="p">(</span><span class="o">&amp;</span><span class="n">DAT_005c41c4</span><span class="p">);</span><span class="w">    </span><span class="c1">// Register Bomber_Model</span>

<span class="w">    </span><span class="c1">// Initialize each model via vtable[0x04]</span>
<span class="w">    </span><span class="n">puVar2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DAT_005c41c8</span><span class="p">;</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">puVar2</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="p">(</span><span class="n">undefined4</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="mh">0x0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">puVar1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">undefined4</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="o">*</span><span class="n">puVar2</span><span class="p">;</span>
<span class="w">        </span><span class="p">(</span><span class="o">**</span><span class="p">(</span><span class="n">code</span><span class="w"> </span><span class="o">**</span><span class="p">)(</span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">puVar2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">4</span><span class="p">))();</span>
<span class="w">        </span><span class="n">puVar2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">puVar1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p><strong>Important</strong>: The linked list is traversed in <strong>registration order</strong>. The server must send model data in the order: Tank → Medic → Bomber.</p>
</blockquote>
<h4 id="vehicle-model-virtual-table">Vehicle Model Virtual Table<a class="headerlink" href="#vehicle-model-virtual-table" title="Permanent link">&para;</a></h4>
<p>Each vehicle model has a virtual function table (vtable). The relevant entry for BEHAVIOR packet reading:</p>
<table>
<thead>
<tr>
<th>Vtable Offset</th>
<th>Function</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>0x04</td>
<td>Init</td>
<td>Called during client initialization</td>
</tr>
<tr>
<td>0x10</td>
<td>Receive</td>
<td>Called to read model data from BEHAVIOR packet</td>
</tr>
</tbody>
</table>
<p>The <code>FUN_004e9630</code> handler calls <code>vtable[0x10]</code> for each model to read its configuration.</p>
<hr />
<h3 id="vehicle-model-1-tank-28-bytes">Vehicle Model 1: Tank (28 bytes)<a class="headerlink" href="#vehicle-model-1-tank-28-bytes" title="Permanent link">&para;</a></h3>
<p>From FUN_004f94c0 (lines 173247-173260):</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="n">__thiscall</span><span class="w"> </span><span class="nf">FUN_004f94c0</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">param_1</span><span class="p">,</span><span class="w"> </span><span class="n">undefined4</span><span class="w"> </span><span class="n">param_2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">FUN_004e5080</span><span class="p">();</span><span class="w">                    </span><span class="c1">// Initialize context</span>
<span class="w">    </span><span class="n">FUN_004e5090</span><span class="p">(</span><span class="n">param_2</span><span class="p">);</span><span class="w">             </span><span class="c1">// Set context pointer</span>

<span class="w">    </span><span class="c1">// Read 7 fixed-point doubles (28 bytes total)</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x10</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 1</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x18</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 2</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x20</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 3</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x28</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 4</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x30</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 5</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x38</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 6</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x40</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 7</span>
<span class="w">    </span><span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Tank Model Wire Format (28 bytes):
┌─────────┬──────┬────────────────┬───────────────────────────────────────────┐
│ Offset  │ Size │ Reader Func    │ Description                               │
├─────────┼──────┼────────────────┼───────────────────────────────────────────┤
│ 0-3     │ 4    │ FUN_004e51d0   │ Field 1 (fixed-point → double)            │
│ 4-7     │ 4    │ FUN_004e51d0   │ Field 2 (fixed-point → double)            │
│ 8-11    │ 4    │ FUN_004e51d0   │ Field 3 (fixed-point → double)            │
│ 12-15   │ 4    │ FUN_004e51d0   │ Field 4 (fixed-point → double)            │
│ 16-19   │ 4    │ FUN_004e51d0   │ Field 5 (fixed-point → double)            │
│ 20-23   │ 4    │ FUN_004e51d0   │ Field 6 (fixed-point → double)            │
│ 24-27   │ 4    │ FUN_004e51d0   │ Field 7 (fixed-point → double)            │
└─────────┴──────┴────────────────┴───────────────────────────────────────────┘
Total: 7 × 4 = 28 bytes
</code></pre></div>
<hr />
<h3 id="vehicle-model-2-medicscout-36-bytes">Vehicle Model 2: Medic/Scout (36 bytes)<a class="headerlink" href="#vehicle-model-2-medicscout-36-bytes" title="Permanent link">&para;</a></h3>
<p>From FUN_004f6860 (lines 171052-171067):</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="n">__thiscall</span><span class="w"> </span><span class="nf">FUN_004f6860</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">param_1</span><span class="p">,</span><span class="w"> </span><span class="n">undefined4</span><span class="w"> </span><span class="n">param_2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">FUN_004e5080</span><span class="p">();</span><span class="w">                    </span><span class="c1">// Initialize context</span>
<span class="w">    </span><span class="n">FUN_004e5090</span><span class="p">(</span><span class="n">param_2</span><span class="p">);</span><span class="w">             </span><span class="c1">// Set context pointer</span>

<span class="w">    </span><span class="c1">// Read 9 fixed-point doubles (36 bytes total)</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x10</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 1</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x18</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 2</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x20</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 3</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x28</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 4</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x30</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 5</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x38</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 6</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x40</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 7</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x48</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 8</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x50</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 9</span>
<span class="w">    </span><span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Medic Model Wire Format (36 bytes):
┌─────────┬──────┬────────────────┬───────────────────────────────────────────┐
│ Offset  │ Size │ Reader Func    │ Description                               │
├─────────┼──────┼────────────────┼───────────────────────────────────────────┤
│ 0-3     │ 4    │ FUN_004e51d0   │ Field 1 (fixed-point → double)            │
│ 4-7     │ 4    │ FUN_004e51d0   │ Field 2 (fixed-point → double)            │
│ 8-11    │ 4    │ FUN_004e51d0   │ Field 3 (fixed-point → double)            │
│ 12-15   │ 4    │ FUN_004e51d0   │ Field 4 (fixed-point → double)            │
│ 16-19   │ 4    │ FUN_004e51d0   │ Field 5 (fixed-point → double)            │
│ 20-23   │ 4    │ FUN_004e51d0   │ Field 6 (fixed-point → double)            │
│ 24-27   │ 4    │ FUN_004e51d0   │ Field 7 (fixed-point → double)            │
│ 28-31   │ 4    │ FUN_004e51d0   │ Field 8 (fixed-point → double)            │
│ 32-35   │ 4    │ FUN_004e51d0   │ Field 9 (fixed-point → double)            │
└─────────┴──────┴────────────────┴───────────────────────────────────────────┘
Total: 9 × 4 = 36 bytes
</code></pre></div>
<hr />
<h3 id="vehicle-model-3-bomber-44-bytes">Vehicle Model 3: Bomber (44 bytes)<a class="headerlink" href="#vehicle-model-3-bomber-44-bytes" title="Permanent link">&para;</a></h3>
<p>From FUN_005012d0 (lines 177793-177810):</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="n">__thiscall</span><span class="w"> </span><span class="nf">FUN_005012d0</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">param_1</span><span class="p">,</span><span class="w"> </span><span class="n">undefined4</span><span class="w"> </span><span class="n">param_2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">FUN_004e5080</span><span class="p">();</span><span class="w">                    </span><span class="c1">// Initialize context</span>
<span class="w">    </span><span class="n">FUN_004e5090</span><span class="p">(</span><span class="n">param_2</span><span class="p">);</span><span class="w">             </span><span class="c1">// Set context pointer</span>

<span class="w">    </span><span class="c1">// Read 11 fixed-point doubles (44 bytes total)</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x10</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 1</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x18</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 2</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x20</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 3</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x28</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 4</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x30</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 5</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x38</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 6</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x40</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 7</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x48</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 8</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x50</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 9</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x58</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 10</span>
<span class="w">    </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x60</span><span class="p">);</span><span class="w">      </span><span class="c1">// 4 bytes: field 11</span>
<span class="w">    </span><span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Bomber Model Wire Format (44 bytes):
┌─────────┬──────┬────────────────┬───────────────────────────────────────────┐
│ Offset  │ Size │ Reader Func    │ Description                               │
├─────────┼──────┼────────────────┼───────────────────────────────────────────┤
│ 0-3     │ 4    │ FUN_004e51d0   │ Field 1 (fixed-point → double)            │
│ 4-7     │ 4    │ FUN_004e51d0   │ Field 2 (fixed-point → double)            │
│ 8-11    │ 4    │ FUN_004e51d0   │ Field 3 (fixed-point → double)            │
│ 12-15   │ 4    │ FUN_004e51d0   │ Field 4 (fixed-point → double)            │
│ 16-19   │ 4    │ FUN_004e51d0   │ Field 5 (fixed-point → double)            │
│ 20-23   │ 4    │ FUN_004e51d0   │ Field 6 (fixed-point → double)            │
│ 24-27   │ 4    │ FUN_004e51d0   │ Field 7 (fixed-point → double)            │
│ 28-31   │ 4    │ FUN_004e51d0   │ Field 8 (fixed-point → double)            │
│ 32-35   │ 4    │ FUN_004e51d0   │ Field 9 (fixed-point → double)            │
│ 36-39   │ 4    │ FUN_004e51d0   │ Field 10 (fixed-point → double)           │
│ 40-43   │ 4    │ FUN_004e51d0   │ Field 11 (fixed-point → double)           │
└─────────┴──────┴────────────────┴───────────────────────────────────────────┘
Total: 11 × 4 = 44 bytes
</code></pre></div>
<hr />
<h3 id="section-size-calculation">Section Size Calculation<a class="headerlink" href="#section-size-calculation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Section 5 Minimum Size (with 0 physics table entries):
┌─────────────────────────────────────────────────────────────────────────┐
│  Physics Tables:                                                        │
│    Table 1: 4 + (0 × 28) + 4 = 8 bytes                                  │
│    Table 2: 4 + (0 × 28) + 4 = 8 bytes                                  │
│    Table 3: 4 + (0 × 28) + 4 = 8 bytes                                  │
│    Table 4: 4 + (0 × 28) + 4 = 8 bytes                                  │
│    Subtotal: 32 bytes                                                   │
├─────────────────────────────────────────────────────────────────────────┤
│  Vehicle Models:                                                        │
│    Tank Model:  7 × 4 = 28 bytes                                        │
│    Medic Model: 9 × 4 = 36 bytes                                        │
│    Bomber Model: 11 × 4 = 44 bytes                                      │
│    Subtotal: 108 bytes                                                  │
├─────────────────────────────────────────────────────────────────────────┤
│  TOTAL MINIMUM: 32 + 108 = 140 bytes                                    │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>
<hr />
<h3 id="data-flow-diagram">Data Flow Diagram<a class="headerlink" href="#data-flow-diagram" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Section 5 Reading Order:
═══════════════════════════════════════════════════════════════════════════

┌─────────────────────────────────────────────────────────────────────────┐
│  FUN_004df690 - Physics Tables                                          │
│                                                                         │
│  FUN_004df5c0(0):                                                       │
│    ├── FUN_004df500() → Physics Table 1                                │
│    │   [count:4][entries:N×28][final_float:4]                          │
│    └── FUN_004df500() → Physics Table 2                                │
│        [count:4][entries:N×28][final_float:4]                          │
│                                                                         │
│  FUN_004df5c0(1):                                                       │
│    ├── FUN_004df500() → Physics Table 3                                │
│    │   [count:4][entries:N×28][final_float:4]                          │
│    └── FUN_004df500() → Physics Table 4                                │
│        [count:4][entries:N×28][final_float:4]                          │
│                                                                         │
├─────────────────────────────────────────────────────────────────────────┤
│  Vehicle Model Loop (DAT_005c41c8 linked list, registration order)      │
│                                                                         │
│  Model 1: Tank_Model::receive (FUN_004f94c0)                           │
│    [field1:4][field2:4][field3:4][field4:4][field5:4][field6:4]        │
│    [field7:4]                                                          │
│    = 28 bytes                                                          │
│                                                                         │
│  Model 2: Medic_Model::receive (FUN_004f6860)                          │
│    [field1:4][field2:4][field3:4][field4:4][field5:4][field6:4]        │
│    [field7:4][field8:4][field9:4]                                      │
│    = 36 bytes                                                          │
│                                                                         │
│  Model 3: Bomber_Model::receive (FUN_005012d0)                         │
│    [field1:4][field2:4][field3:4][field4:4][field5:4][field6:4]        │
│    [field7:4][field8:4][field9:4][field10:4][field11:4]                │
│    = 44 bytes                                                          │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘

Minimum Total: 32 + 28 + 36 + 44 = 140 bytes
═══════════════════════════════════════════════════════════════════════════
</code></pre></div>
<hr />
<h3 id="building-section-5-in-python">Building Section 5 in Python<a class="headerlink" href="#building-section-5-in-python" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">struct</span>

<span class="k">def</span><span class="w"> </span><span class="nf">encode_fixed_point</span><span class="p">(</span><span class="n">float_value</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a float to fixed-point format (4 bytes big-endian).&quot;&quot;&quot;</span>
    <span class="n">wire_value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">float_value</span> <span class="o">*</span> <span class="mi">65536</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;&gt;i&#39;</span><span class="p">,</span> <span class="n">wire_value</span><span class="p">)</span>

<span class="c1"># ═══════════════════════════════════════════════════════════════════════════</span>
<span class="c1"># PHYSICS TABLES</span>
<span class="c1"># ═══════════════════════════════════════════════════════════════════════════</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_physics_table_entry</span><span class="p">(</span><span class="n">float3_a</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> 
                                <span class="n">float3_b</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> 
                                <span class="n">bool_flag</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a single physics table entry (28 bytes).</span>

<span class="sd">    Args:</span>
<span class="sd">        float3_a: First 3D vector (x, y, z)</span>
<span class="sd">        float3_b: Second 3D vector (x, y, z)</span>
<span class="sd">        bool_flag: Boolean flag</span>

<span class="sd">    Returns:</span>
<span class="sd">        28 bytes of entry data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>

    <span class="c1"># First float3 (12 bytes)</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">float3_a</span><span class="p">:</span>
        <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">encode_fixed_point</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>

    <span class="c1"># Second float3 (12 bytes)</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">float3_b</span><span class="p">:</span>
        <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">encode_fixed_point</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>

    <span class="c1"># Bool flag as uint32 (4 bytes)</span>
    <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;&gt;I&#39;</span><span class="p">,</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">bool_flag</span> <span class="k">else</span> <span class="mi">0</span><span class="p">))</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">28</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Entry should be 28 bytes, got </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">create_physics_table</span><span class="p">(</span><span class="n">entries</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">final_float</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a single physics table.</span>

<span class="sd">    Args:</span>
<span class="sd">        entries: List of (float3_a, float3_b, bool_flag) tuples, or None for empty</span>
<span class="sd">        final_float: Final float value at end of table</span>

<span class="sd">    Returns:</span>
<span class="sd">        bytes - Physics table data (minimum 8 bytes if empty)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">entries</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">entries</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Entry count (4 bytes, uint32 big-endian)</span>
    <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;&gt;I&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">entries</span><span class="p">)))</span>

    <span class="c1"># Entry data (28 bytes each)</span>
    <span class="k">for</span> <span class="n">float3_a</span><span class="p">,</span> <span class="n">float3_b</span><span class="p">,</span> <span class="n">bool_flag</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">:</span>
        <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">create_physics_table_entry</span><span class="p">(</span><span class="n">float3_a</span><span class="p">,</span> <span class="n">float3_b</span><span class="p">,</span> <span class="n">bool_flag</span><span class="p">))</span>

    <span class="c1"># Final float (4 bytes, fixed-point)</span>
    <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">encode_fixed_point</span><span class="p">(</span><span class="n">final_float</span><span class="p">))</span>

    <span class="n">expected_size</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">+</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">entries</span><span class="p">)</span> <span class="o">*</span> <span class="mi">28</span><span class="p">)</span> <span class="o">+</span> <span class="mi">4</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected_size</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Table should be </span><span class="si">{</span><span class="n">expected_size</span><span class="si">}</span><span class="s2"> bytes, got </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">create_all_physics_tables</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create all 4 physics tables (32 bytes minimum if all empty).</span>

<span class="sd">    Returns:</span>
<span class="sd">        bytes - All physics tables data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>

    <span class="c1"># FUN_004df5c0(0) - first pair</span>
    <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">create_physics_table</span><span class="p">())</span>  <span class="c1"># Table 1</span>
    <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">create_physics_table</span><span class="p">())</span>  <span class="c1"># Table 2</span>

    <span class="c1"># FUN_004df5c0(1) - second pair</span>
    <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">create_physics_table</span><span class="p">())</span>  <span class="c1"># Table 3</span>
    <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">create_physics_table</span><span class="p">())</span>  <span class="c1"># Table 4</span>

    <span class="k">return</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>


<span class="c1"># ═══════════════════════════════════════════════════════════════════════════</span>
<span class="c1"># VEHICLE MODELS</span>
<span class="c1"># ═══════════════════════════════════════════════════════════════════════════</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_tank_model</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create Tank model data (28 bytes = 7 fields).</span>

<span class="sd">    Args:</span>
<span class="sd">        fields: List of 7 float values, or None for defaults (all 1.0)</span>

<span class="sd">    Returns:</span>
<span class="sd">        28 bytes of Tank model data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">7</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Tank model needs 7 fields, got </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">data</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
        <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">encode_fixed_point</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">28</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Tank model should be 28 bytes, got </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">create_medic_model</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create Medic/Scout model data (36 bytes = 9 fields).</span>

<span class="sd">    Args:</span>
<span class="sd">        fields: List of 9 float values, or None for defaults (all 1.0)</span>

<span class="sd">    Returns:</span>
<span class="sd">        36 bytes of Medic model data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">9</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">9</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Medic model needs 9 fields, got </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">data</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
        <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">encode_fixed_point</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">36</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Medic model should be 36 bytes, got </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">create_bomber_model</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create Bomber model data (44 bytes = 11 fields).</span>

<span class="sd">    Args:</span>
<span class="sd">        fields: List of 11 float values, or None for defaults (all 1.0)</span>

<span class="sd">    Returns:</span>
<span class="sd">        44 bytes of Bomber model data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">11</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">11</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Bomber model needs 11 fields, got </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">data</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
        <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">encode_fixed_point</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">44</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Bomber model should be 44 bytes, got </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">create_all_vehicle_models</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create all 3 vehicle models (108 bytes total).</span>
<span class="sd">    Order: Tank, Medic, Bomber (registration order).</span>

<span class="sd">    Returns:</span>
<span class="sd">        bytes - All vehicle model data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>

    <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">create_tank_model</span><span class="p">())</span>    <span class="c1"># 28 bytes</span>
    <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">create_medic_model</span><span class="p">())</span>   <span class="c1"># 36 bytes</span>
    <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">create_bomber_model</span><span class="p">())</span>  <span class="c1"># 44 bytes</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">108</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Vehicle models should be 108 bytes, got </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>


<span class="c1"># ═══════════════════════════════════════════════════════════════════════════</span>
<span class="c1"># SECTION 5 COMPLETE</span>
<span class="c1"># ═══════════════════════════════════════════════════════════════════════════</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_behavior_section_5</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create the complete Section 5 data for BEHAVIOR packet.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bytes - Section 5 data (minimum 140 bytes)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>

    <span class="c1"># Part 1: Physics tables (32 bytes minimum)</span>
    <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">create_all_physics_tables</span><span class="p">())</span>

    <span class="c1"># Part 2: Vehicle models (108 bytes)</span>
    <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">create_all_vehicle_models</span><span class="p">())</span>

    <span class="c1"># Minimum: 32 + 108 = 140 bytes</span>
    <span class="k">return</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div>
<hr />
<h3 id="simplified-version-all-defaults">Simplified Version (All Defaults)<a class="headerlink" href="#simplified-version-all-defaults" title="Permanent link">&para;</a></h3>
<p>For initial testing, you can use this minimal implementation:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_empty_section_5</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create minimum valid Section 5 (140 bytes).</span>
<span class="sd">    All physics tables empty, all vehicle model fields = 1.0.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>

    <span class="c1"># 4 empty physics tables (8 bytes each = 32 bytes)</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;&gt;I&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>       <span class="c1"># count = 0</span>
        <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">encode_fixed_point</span><span class="p">(</span><span class="mf">1.0</span><span class="p">))</span>    <span class="c1"># final float</span>

    <span class="c1"># 3 vehicle models with default values (108 bytes)</span>
    <span class="c1"># Tank: 7 fields</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
        <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">encode_fixed_point</span><span class="p">(</span><span class="mf">1.0</span><span class="p">))</span>
    <span class="c1"># Medic: 9 fields</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">):</span>
        <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">encode_fixed_point</span><span class="p">(</span><span class="mf">1.0</span><span class="p">))</span>
    <span class="c1"># Bomber: 11 fields</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">):</span>
        <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">encode_fixed_point</span><span class="p">(</span><span class="mf">1.0</span><span class="p">))</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">140</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Section 5 should be 140 bytes, got </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div>
<hr />
<h3 id="example-section-5-bytes-minimum-valid">Example Section 5 Bytes (Minimum Valid)<a class="headerlink" href="#example-section-5-bytes-minimum-valid" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Section 5 (140 bytes) with empty physics tables and default model values:

═══════════════════════════════════════════════════════════════════════════
PHYSICS TABLES (32 bytes):
═══════════════════════════════════════════════════════════════════════════

Table 1 (8 bytes):
  00 00 00 00              Count: 0 entries
  00 01 00 00              Final float: 1.0

Table 2 (8 bytes):
  00 00 00 00              Count: 0 entries
  00 01 00 00              Final float: 1.0

Table 3 (8 bytes):
  00 00 00 00              Count: 0 entries
  00 01 00 00              Final float: 1.0

Table 4 (8 bytes):
  00 00 00 00              Count: 0 entries
  00 01 00 00              Final float: 1.0

═══════════════════════════════════════════════════════════════════════════
VEHICLE MODELS (108 bytes):
═══════════════════════════════════════════════════════════════════════════

Tank Model (28 bytes):
  00 01 00 00              Field 1: 1.0
  00 01 00 00              Field 2: 1.0
  00 01 00 00              Field 3: 1.0
  00 01 00 00              Field 4: 1.0
  00 01 00 00              Field 5: 1.0
  00 01 00 00              Field 6: 1.0
  00 01 00 00              Field 7: 1.0

Medic Model (36 bytes):
  00 01 00 00              Field 1: 1.0
  00 01 00 00              Field 2: 1.0
  00 01 00 00              Field 3: 1.0
  00 01 00 00              Field 4: 1.0
  00 01 00 00              Field 5: 1.0
  00 01 00 00              Field 6: 1.0
  00 01 00 00              Field 7: 1.0
  00 01 00 00              Field 8: 1.0
  00 01 00 00              Field 9: 1.0

Bomber Model (44 bytes):
  00 01 00 00              Field 1: 1.0
  00 01 00 00              Field 2: 1.0
  00 01 00 00              Field 3: 1.0
  00 01 00 00              Field 4: 1.0
  00 01 00 00              Field 5: 1.0
  00 01 00 00              Field 6: 1.0
  00 01 00 00              Field 7: 1.0
  00 01 00 00              Field 8: 1.0
  00 01 00 00              Field 9: 1.0
  00 01 00 00              Field 10: 1.0
  00 01 00 00              Field 11: 1.0
</code></pre></div>
<p><strong>Full Hex Dump (140 bytes):</strong>
<div class="highlight"><pre><span></span><code>00 00 00 00 00 01 00 00 00 00 00 00 00 01 00 00
00 00 00 00 00 01 00 00 00 00 00 00 00 01 00 00
00 01 00 00 00 01 00 00 00 01 00 00 00 01 00 00
00 01 00 00 00 01 00 00 00 01 00 00 00 01 00 00
00 01 00 00 00 01 00 00 00 01 00 00 00 01 00 00
00 01 00 00 00 01 00 00 00 01 00 00 00 01 00 00
00 01 00 00 00 01 00 00 00 01 00 00 00 01 00 00
00 01 00 00 00 01 00 00 00 01 00 00 00 01 00 00
00 01 00 00 00 01 00 00 00 01 00 00
</code></pre></div></p>
<hr />
<h3 id="vehicle-model-summary">Vehicle Model Summary<a class="headerlink" href="#vehicle-model-summary" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Model</th>
<th>Handler Function</th>
<th>Field Count</th>
<th>Wire Size</th>
</tr>
</thead>
<tbody>
<tr>
<td>Tank</td>
<td>FUN_004f94c0</td>
<td>7</td>
<td>28 bytes</td>
</tr>
<tr>
<td>Medic/Scout</td>
<td>FUN_004f6860</td>
<td>9</td>
<td>36 bytes</td>
</tr>
<tr>
<td>Bomber</td>
<td>FUN_005012d0</td>
<td>11</td>
<td>44 bytes</td>
</tr>
<tr>
<td><strong>Total</strong></td>
<td></td>
<td><strong>27</strong></td>
<td><strong>108 bytes</strong></td>
</tr>
</tbody>
</table>
<hr />
<h3 id="common-mistakes">Common Mistakes<a class="headerlink" href="#common-mistakes" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Mistake</th>
<th>Symptom</th>
<th>Fix</th>
</tr>
</thead>
<tbody>
<tr>
<td>Missing Section 5 entirely</td>
<td>Client reads garbage, corrupted physics</td>
<td>Add 140+ bytes of Section 5 data</td>
</tr>
<tr>
<td>Wrong physics table count</td>
<td>Data misalignment</td>
<td>Send exactly 4 physics tables</td>
</tr>
<tr>
<td>Wrong vehicle model order</td>
<td>Tank/Medic/Bomber params swapped</td>
<td>Order: Tank → Medic → Bomber</td>
</tr>
<tr>
<td>Missing final float in tables</td>
<td>Off-by-4 bytes per table</td>
<td>Each table needs 4-byte final float</td>
</tr>
<tr>
<td>Little-endian encoding</td>
<td>Garbled values</td>
<td>Use big-endian (<code>&gt;I</code>, <code>&gt;i</code>)</td>
</tr>
<tr>
<td>Using 8-byte doubles</td>
<td>Extra bytes corrupt data</td>
<td>Fixed-point values are 4 bytes</td>
</tr>
<tr>
<td>Wrong vehicle model field count</td>
<td>Model data truncated/extended</td>
<td>Tank=7, Medic=9, Bomber=11</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="verification-checklist">Verification Checklist<a class="headerlink" href="#verification-checklist" title="Permanent link">&para;</a></h3>
<p>Before finalizing the BEHAVIOR packet, verify Section 5:</p>
<ul>
<li>[ ] Exactly 4 physics tables</li>
<li>[ ] Each physics table has: count (4 bytes) + entries (N×28 bytes) + final float (4 bytes)</li>
<li>[ ] Physics table entries: 12 + 12 + 4 = 28 bytes each</li>
<li>[ ] Exactly 3 vehicle models in order: Tank, Medic, Bomber</li>
<li>[ ] Tank model: exactly 28 bytes (7 fields)</li>
<li>[ ] Medic model: exactly 36 bytes (9 fields)</li>
<li>[ ] Bomber model: exactly 44 bytes (11 fields)</li>
<li>[ ] Total Section 5: minimum 140 bytes</li>
<li>[ ] All multi-byte values are big-endian</li>
<li>[ ] All float values use fixed-point encoding (× 65536)</li>
</ul>
<hr />
<h3 id="section-summary">Section Summary<a class="headerlink" href="#section-summary" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Section Number</td>
<td>5</td>
</tr>
<tr>
<td>Handler Function</td>
<td>FUN_004e9630</td>
</tr>
<tr>
<td>Physics Tables</td>
<td>4 (read via FUN_004df690)</td>
</tr>
<tr>
<td>Vehicle Models</td>
<td>3 (Tank, Medic, Bomber)</td>
</tr>
<tr>
<td>Minimum Section Size</td>
<td>140 bytes</td>
</tr>
<tr>
<td>Position After</td>
<td>Vehicle Type Data (offset 2,975)</td>
</tr>
<tr>
<td>Position Before</td>
<td>Packet Finalization (byte alignment)</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="cumulative-offset-after-section-5">Cumulative Offset After Section 5<a class="headerlink" href="#cumulative-offset-after-section-5" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>After Section 5 (Complete BEHAVIOR Payload):
  Fixed Header:              95 bytes
  Entity Weapon Data:        2,340 bytes
  Entity Core Stats:         468 bytes
  Vehicle Type Data:         72 bytes
  Physics Tables + Models:   140 bytes (minimum)
  ──────────────────────────────────────────
  TOTAL MINIMUM PAYLOAD:     3,115 bytes
</code></pre></div>
<hr />
<h3 id="complete-behavior-packet-size">Complete BEHAVIOR Packet Size<a class="headerlink" href="#complete-behavior-packet-size" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Complete BEHAVIOR Packet:
┌──────────────┬──────────────┬─────────────────────────────────────────────┐
│    TYPE      │   LENGTH     │              PAYLOAD                        │
│   (1 byte)   │ (2 bytes BE) │           (3,115+ bytes)                    │
├──────────────┼──────────────┼─────────────────────────────────────────────┤
│     0x24     │    varies    │  Section 1 + 2 + 3 + 4 + 5                  │
└──────────────┴──────────────┴─────────────────────────────────────────────┘

Minimum total wire size: 1 + 2 + 3,115 = 3,118 bytes
</code></pre></div>
<hr />
<h3 id="after-behavior-byte-alignment">After BEHAVIOR: Byte Alignment<a class="headerlink" href="#after-behavior-byte-alignment" title="Permanent link">&para;</a></h3>
<p>After Section 5, the client calls <code>FUN_00509dc0</code> for byte alignment. This function:</p>
<ol>
<li>Checks if the bit stream is byte-aligned</li>
<li>If not, reads 0-7 padding bits to reach a byte boundary</li>
</ol>
<p>For a server sending byte-aligned data, no additional padding is needed. The client will simply verify alignment and continue.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// From FUN_00509410 (called by FUN_00509dc0)</span>
<span class="kt">void</span><span class="w"> </span><span class="kr">__fastcall</span><span class="w"> </span><span class="n">FUN_00509410</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">param_1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">**</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">**</span><span class="p">)(</span><span class="n">param_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x18</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">iVar1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FUN_004dc7d0</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">)(</span><span class="n">iVar1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Read padding bits: 8 - current_bit_position</span>
<span class="w">            </span><span class="n">FUN_00508ba0</span><span class="p">(</span><span class="n">param_1</span><span class="p">,</span><span class="w"> </span><span class="n">iVar1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">)(</span><span class="n">iVar1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">8</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p><strong>Note</strong>: If you're sending complete bytes (which you should be), the bit position will be 0 and no padding is needed.</p>
</blockquote>
<hr />
<p><em>Previous: <a href="part-4-4-vehicle-type-data.html">Part 4-4: BEHAVIOR - Vehicle Type Data</a></em><br />
<em>Next: <a href="../part-5-team-info/index.html">Part 5: TEAM_INFO Packet</a></em></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.sections", "navigation.indexes", "search.suggest", "search.highlight", "content.code.copy", "navigation.top"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>