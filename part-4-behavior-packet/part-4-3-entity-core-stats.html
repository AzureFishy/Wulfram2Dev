
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the Wulfram 2 server restoration project">
      
      
      
      
        <link rel="prev" href="part-4-2-entity-weapon-data.html">
      
      
        <link rel="next" href="part-4-4-vehicle-type-data.html">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>Entity Core Stats - Wulfram 2 Server Implementation Guide</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#wulfram-2-server-implementation-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="Wulfram 2 Server Implementation Guide" class="md-header__button md-logo" aria-label="Wulfram 2 Server Implementation Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Wulfram 2 Server Implementation Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Entity Core Stats
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Wulfram 2 Server Implementation Guide" class="md-nav__button md-logo" aria-label="Wulfram 2 Server Implementation Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Wulfram 2 Server Implementation Guide
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../part-0-getting-started/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-1-introduction/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 1.0 - Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-2-hello-handshake/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 2.0 - HELLO Handshake
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-3-login-authentication/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 3.0 - Login Authentication
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    BEHAVIOR Packet
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            BEHAVIOR Packet
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="part-4-1-fixed-header.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 4.1 - Fixed Header
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="part-4-2-entity-weapon-data.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 4.2 - Entity Weapon Data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Part 4.3 - Entity Core Stats
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="part-4-3-entity-core-stats.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Part 4.3 - Entity Core Stats
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#part-4-3-behavior-packet-entity-core-stats" class="md-nav__link">
    <span class="md-ellipsis">
      Part 4-3: BEHAVIOR Packet - Entity Core Stats
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Part 4-3: BEHAVIOR Packet - Entity Core Stats">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-handler-code" class="md-nav__link">
    <span class="md-ellipsis">
      The Handler Code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loop-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Loop Analysis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#entity-core-stats-structure-12-bytes-per-entity" class="md-nav__link">
    <span class="md-ellipsis">
      Entity Core Stats Structure (12 bytes per entity)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#section-size-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      Section Size Calculation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-39-entity-types" class="md-nav__link">
    <span class="md-ellipsis">
      The 39 Entity Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#field-verification-max-hit-points" class="md-nav__link">
    <span class="md-ellipsis">
      Field Verification: Max Hit Points
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-flow-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      Data Flow Diagram
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-entity-core-stats-in-python" class="md-nav__link">
    <span class="md-ellipsis">
      Building Entity Core Stats in Python
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simplified-version-all-zeros" class="md-nav__link">
    <span class="md-ellipsis">
      Simplified Version (All Zeros)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-entity-stats-bytes" class="md-nav__link">
    <span class="md-ellipsis">
      Example Entity Stats Bytes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-mistakes" class="md-nav__link">
    <span class="md-ellipsis">
      Common Mistakes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verification-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      Verification Checklist
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#section-summary" class="md-nav__link">
    <span class="md-ellipsis">
      Section Summary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cumulative-offset-after-section-3" class="md-nav__link">
    <span class="md-ellipsis">
      Cumulative Offset After Section 3
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="part-4-4-vehicle-type-data.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 4.4 - Vehicle Type Data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="part-4-5-physics-tables.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 4.5 - Physics Tables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="part-4-6-packet-finalization.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 4.6 - Packet Finalization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="part-4-7-post-behavior-flow.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 4.7 - Post BEHAVIOR Flow
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../part-0-game-state/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Game State
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Game State
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-5-team-info/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 5.0 - TEAM INFO
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-6-reincarnate/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 6.0 - REINCARNATE
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-7-update-array/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 7.0 - UPDATE ARRAY
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../part-8-structures/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Structures
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Structures
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-8-structures/add-to-roster.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 8.1 - ADD_TO_ROSTER
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-8-structures/birth-notice.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 8.2 - BIRTH_NOTICE
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-8-structures/update-stats.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 8.3 - UPDATE_STATS
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../part-9-udp-protocol/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    UDP Protocol
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            UDP Protocol
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-9-udp-protocol/protocol-overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 9.1 - PROTOCOL OVERVIEW
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-9-udp-protocol/graph.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 9.2 - GRAPH Data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-9-udp-protocol/priority.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 9.3 - PRIORITY Updates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-9-udp-protocol/voice.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 9.4 - VOICE
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-9-udp-protocol/weapons.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 9.5 - WEAPONS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-9-udp-protocol/d-handshake.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 9.6 - D-HANDSHAKE
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../part-11-tcp-protocol/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    TCP Protocol
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            TCP Protocol
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../part-10-reference-files/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Reference Tables
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Reference Tables
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#part-4-3-behavior-packet-entity-core-stats" class="md-nav__link">
    <span class="md-ellipsis">
      Part 4-3: BEHAVIOR Packet - Entity Core Stats
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Part 4-3: BEHAVIOR Packet - Entity Core Stats">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-handler-code" class="md-nav__link">
    <span class="md-ellipsis">
      The Handler Code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loop-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Loop Analysis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#entity-core-stats-structure-12-bytes-per-entity" class="md-nav__link">
    <span class="md-ellipsis">
      Entity Core Stats Structure (12 bytes per entity)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#section-size-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      Section Size Calculation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-39-entity-types" class="md-nav__link">
    <span class="md-ellipsis">
      The 39 Entity Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#field-verification-max-hit-points" class="md-nav__link">
    <span class="md-ellipsis">
      Field Verification: Max Hit Points
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-flow-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      Data Flow Diagram
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-entity-core-stats-in-python" class="md-nav__link">
    <span class="md-ellipsis">
      Building Entity Core Stats in Python
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simplified-version-all-zeros" class="md-nav__link">
    <span class="md-ellipsis">
      Simplified Version (All Zeros)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-entity-stats-bytes" class="md-nav__link">
    <span class="md-ellipsis">
      Example Entity Stats Bytes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-mistakes" class="md-nav__link">
    <span class="md-ellipsis">
      Common Mistakes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verification-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      Verification Checklist
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#section-summary" class="md-nav__link">
    <span class="md-ellipsis">
      Section Summary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cumulative-offset-after-section-3" class="md-nav__link">
    <span class="md-ellipsis">
      Cumulative Offset After Section 3
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="wulfram-2-server-implementation-guide">Wulfram 2 Server Implementation Guide<a class="headerlink" href="#wulfram-2-server-implementation-guide" title="Permanent link">&para;</a></h1>
<h2 id="part-4-3-behavior-packet-entity-core-stats">Part 4-3: BEHAVIOR Packet - Entity Core Stats<a class="headerlink" href="#part-4-3-behavior-packet-entity-core-stats" title="Permanent link">&para;</a></h2>
<hr />
<h3 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h3>
<p>The Entity Core Stats section defines the <strong>build time</strong>, <strong>build cost</strong>, and <strong>max hit points</strong> for all 39 entity types in the game. Unlike the Entity Weapon Data (which only covers 4 vehicle types), this section covers <strong>every</strong> entity type.</p>
<div class="highlight"><pre><span></span><code>Position in BEHAVIOR Packet:
┌─────────────────────────────────────────────────────────────────────────┐
│  SECTION 1: Fixed Header (95 bytes)                        ✓ Complete  │
│  SECTION 2: Entity Weapon Data (2,340 bytes)               ✓ Complete  │
├─────────────────────────────────────────────────────────────────────────┤
│  SECTION 3: Entity Core Stats (468 bytes)                  ◄ YOU ARE   │
│             39 entities × 12 bytes each                        HERE    │
├─────────────────────────────────────────────────────────────────────────┤
│  SECTION 4: Vehicle Type Data (variable)                               │
│  SECTION 5: Physics Tables + Vehicle Models (variable)                 │
│  PACKET FINALIZATION: Byte Alignment                                   │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>
<hr />
<h3 id="the-handler-code">The Handler Code<a class="headerlink" href="#the-handler-code" title="Permanent link">&para;</a></h3>
<p>From FUN_004e4a80 (lines 156648-156665):</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">FUN_004e4a80</span><span class="p">(</span><span class="n">undefined4</span><span class="w"> </span><span class="n">param_1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">iVar1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">piVar2</span><span class="p">;</span>

<span class="w">    </span><span class="n">FUN_004e5080</span><span class="p">();</span><span class="w">                    </span><span class="c1">// Initialize context</span>
<span class="w">    </span><span class="n">FUN_004e5090</span><span class="p">(</span><span class="n">param_1</span><span class="p">);</span><span class="w">             </span><span class="c1">// Set context pointer</span>

<span class="w">    </span><span class="c1">// Start at entity type array (DAT_005b9a68)</span>
<span class="w">    </span><span class="n">piVar2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">DAT_005b9a68</span><span class="p">;</span>

<span class="w">    </span><span class="k">do</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">iVar1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">piVar2</span><span class="p">;</span><span class="w">               </span><span class="c1">// Get entity type pointer</span>

<span class="w">        </span><span class="c1">// Read 3 values for this entity type:</span>
<span class="w">        </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">iVar1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x38</span><span class="p">);</span><span class="w">    </span><span class="c1">// 4 bytes: Build time (fixed-point)</span>
<span class="w">        </span><span class="n">FUN_004e51d0</span><span class="p">(</span><span class="n">iVar1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x40</span><span class="p">);</span><span class="w">    </span><span class="c1">// 4 bytes: Build cost (fixed-point)</span>
<span class="w">        </span><span class="n">FUN_00509310</span><span class="p">(</span><span class="n">iVar1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x48</span><span class="p">);</span><span class="w">    </span><span class="c1">// 4 bytes: Max HP (uint32)</span>

<span class="w">        </span><span class="n">piVar2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">piVar2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">           </span><span class="c1">// Next entity type</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">piVar2</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mh">0x5b9b04</span><span class="p">);</span><span class="w">  </span><span class="c1">// Until end of entity array</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h3 id="loop-analysis">Loop Analysis<a class="headerlink" href="#loop-analysis" title="Permanent link">&para;</a></h3>
<p>The loop iterates through a contiguous array of entity type pointers:</p>
<div class="highlight"><pre><span></span><code>Loop bounds:
  Start:  &amp;DAT_005b9a68  = 0x5b9a68
  End:    0x5b9b04       (exclusive)

  Range:  0x5b9b04 - 0x5b9a68 = 0x9C = 156 bytes

  Entity count: 156 / 4 = 39 entities
</code></pre></div>
<p><strong>Key point</strong>: The client <strong>always</strong> expects exactly 39 entity types, regardless of how many are actually used in gameplay.</p>
<hr />
<h3 id="entity-core-stats-structure-12-bytes-per-entity">Entity Core Stats Structure (12 bytes per entity)<a class="headerlink" href="#entity-core-stats-structure-12-bytes-per-entity" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Entity Core Stats Layout (12 bytes):
┌─────────┬──────┬────────────────┬───────────────────────────────────────────┐
│ Offset  │ Size │ Reader Func    │ Description                               │
├─────────┼──────┼────────────────┼───────────────────────────────────────────┤
│ 0       │ 4    │ FUN_004e51d0   │ Build time (fixed-point double)           │
│ 4       │ 4    │ FUN_004e51d0   │ Build cost (fixed-point double)           │
│ 8       │ 4    │ FUN_00509310   │ Max hit points (uint32 big-endian)        │
└─────────┴──────┴────────────────┴───────────────────────────────────────────┘
Total: 4 + 4 + 4 = 12 bytes per entity
</code></pre></div>
<blockquote>
<p><strong>Note</strong>: FUN_004e51d0 is a fixed-point reader wrapper that internally 
calls FUN_00509310 (32-bit big-endian read) and then converts the result 
using the 1/65536 multiplier described in Part 1.</p>
</blockquote>
<hr />
<h3 id="section-size-calculation">Section Size Calculation<a class="headerlink" href="#section-size-calculation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Entity Core Stats Size:
┌─────────────────────────────────────────────────────────────────────────┐
│  39 entities × 12 bytes = 468 bytes                                    │
└─────────────────────────────────────────────────────────────────────────┘

This size is FIXED - always exactly 468 bytes.
</code></pre></div>
<hr />
<h3 id="the-39-entity-types">The 39 Entity Types<a class="headerlink" href="#the-39-entity-types" title="Permanent link">&para;</a></h3>
<p>Based on the entity registration in FUN_004e3bd0 (lines 156405-156621):</p>
<table>
<thead>
<tr>
<th>Index</th>
<th>Entity Name</th>
<th>Category</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Tank</td>
<td>Manned Unit</td>
</tr>
<tr>
<td>1</td>
<td>Scout</td>
<td>Manned Unit</td>
</tr>
<tr>
<td>2</td>
<td>Assault Platform</td>
<td>Manned Unit</td>
</tr>
<tr>
<td>3</td>
<td>Bomber</td>
<td>Manned Unit</td>
</tr>
<tr>
<td>4</td>
<td>Transport</td>
<td>Manned Unit</td>
</tr>
<tr>
<td>5</td>
<td>Flak Shell</td>
<td>Weapon</td>
</tr>
<tr>
<td>6</td>
<td>Pulse Shell</td>
<td>Weapon</td>
</tr>
<tr>
<td>7</td>
<td>Short Missile</td>
<td>Weapon</td>
</tr>
<tr>
<td>8</td>
<td>Hunter</td>
<td>Weapon</td>
</tr>
<tr>
<td>9</td>
<td>Heavy Missile</td>
<td>Weapon</td>
</tr>
<tr>
<td>10</td>
<td>(Unknown)</td>
<td>Weapon</td>
</tr>
<tr>
<td>11</td>
<td>Piercer</td>
<td>Weapon</td>
</tr>
<tr>
<td>12</td>
<td>Thumper</td>
<td>Weapon</td>
</tr>
<tr>
<td>13</td>
<td>Caltrop</td>
<td>Weapon</td>
</tr>
<tr>
<td>14</td>
<td>Orbital Bomb</td>
<td>Weapon</td>
</tr>
<tr>
<td>15</td>
<td>Cruise Missile</td>
<td>Weapon</td>
</tr>
<tr>
<td>16</td>
<td>Mortar Shell</td>
<td>Weapon</td>
</tr>
<tr>
<td>17</td>
<td>Flare</td>
<td>Weapon</td>
</tr>
<tr>
<td>18</td>
<td>Aereal Bomb</td>
<td>Weapon</td>
</tr>
<tr>
<td>19</td>
<td>Cargo Box</td>
<td>Deployable</td>
</tr>
<tr>
<td>20</td>
<td>Uplink</td>
<td>Deployable</td>
</tr>
<tr>
<td>21</td>
<td>Supply Ship</td>
<td>Space Unit</td>
</tr>
<tr>
<td>22</td>
<td>Torpedo</td>
<td>Space Unit</td>
</tr>
<tr>
<td>23</td>
<td>Particle Beam</td>
<td>Space Unit</td>
</tr>
<tr>
<td>24</td>
<td>Space Explosion</td>
<td>Space Unit</td>
</tr>
<tr>
<td>25</td>
<td>Power Cell</td>
<td>Ground Unit</td>
</tr>
<tr>
<td>26</td>
<td>Refuel Pad</td>
<td>Ground Unit</td>
</tr>
<tr>
<td>27</td>
<td>Repair Pad</td>
<td>Ground Unit</td>
</tr>
<tr>
<td>28</td>
<td>Shield</td>
<td>Ground Unit</td>
</tr>
<tr>
<td>29</td>
<td>Flak Turret</td>
<td>Ground Unit</td>
</tr>
<tr>
<td>30</td>
<td>Gun Turret</td>
<td>Ground Unit</td>
</tr>
<tr>
<td>31</td>
<td>Heavy Missile Silo</td>
<td>Ground Unit</td>
</tr>
<tr>
<td>32</td>
<td>Missile Launcher</td>
<td>Ground Unit</td>
</tr>
<tr>
<td>33</td>
<td>Skypump</td>
<td>Ground Unit</td>
</tr>
<tr>
<td>34</td>
<td>Portal</td>
<td>Ground Unit</td>
</tr>
<tr>
<td>35</td>
<td>Darklight</td>
<td>Ground Unit</td>
</tr>
<tr>
<td>36</td>
<td>Spy Bug</td>
<td>Ground Unit</td>
</tr>
<tr>
<td>37</td>
<td>Decoration</td>
<td>Ground Unit</td>
</tr>
<tr>
<td>38</td>
<td>ILLEGAL</td>
<td>(Placeholder)</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Note</strong>: The last entry (index 38) is a placeholder/sentinel value. The entity array actually has slots for indices 38, 39, and 40, but they all point to the same "ILLEGAL" entity. However, the BEHAVIOR packet only reads 39 entries (indices 0-38).</p>
</blockquote>
<hr />
<h3 id="field-verification-max-hit-points">Field Verification: Max Hit Points<a class="headerlink" href="#field-verification-max-hit-points" title="Permanent link">&para;</a></h3>
<p>The offset 0x48 field is confirmed as max HP from multiple code references:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// From FUN_00490ae0 (line 102056) - Health bar calculation</span>
<span class="n">iVar1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">)((</span><span class="o">&amp;</span><span class="n">DAT_005b9a68</span><span class="p">)[</span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">)((</span><span class="kt">int</span><span class="p">)</span><span class="n">pfVar3</span><span class="p">[</span><span class="mi">-1</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">8</span><span class="p">)]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x48</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="o">*</span><span class="n">pfVar3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">fVar2</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">iVar1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="n">pfVar3</span><span class="p">;</span><span class="w">  </span><span class="c1">// Health percentage</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">// From FUN_00479470 (line 88056) - Setting initial HP</span>
<span class="o">*</span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="o">*</span><span class="p">)(</span><span class="n">iVar2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0xd0</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">     </span><span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">)((</span><span class="o">&amp;</span><span class="n">DAT_005b9a68</span><span class="p">)[</span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">)(</span><span class="n">iVar2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">8</span><span class="p">)]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">0x48</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="n">unaff_ESI</span><span class="p">;</span>
</code></pre></div>
<p>The pattern <code>entity_type_array[entity_index] + 0x48</code> consistently retrieves max HP, which is then used to calculate health percentages and damage.</p>
<hr />
<h3 id="data-flow-diagram">Data Flow Diagram<a class="headerlink" href="#data-flow-diagram" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Entity Core Stats Reading Order:
═══════════════════════════════════════════════════════════════════════════

Entity 0  (Tank):              [build_time][build_cost][max_hp] = 12 bytes
Entity 1  (Scout):             [build_time][build_cost][max_hp] = 12 bytes
Entity 2  (Assault Platform):  [build_time][build_cost][max_hp] = 12 bytes
Entity 3  (Bomber):            [build_time][build_cost][max_hp] = 12 bytes
Entity 4  (Transport):         [build_time][build_cost][max_hp] = 12 bytes
Entity 5  (Flak Shell):        [build_time][build_cost][max_hp] = 12 bytes
...
Entity 37 (Decoration):        [build_time][build_cost][max_hp] = 12 bytes
Entity 38 (ILLEGAL):           [build_time][build_cost][max_hp] = 12 bytes

═══════════════════════════════════════════════════════════════════════════
Total: 39 × 12 = 468 bytes
═══════════════════════════════════════════════════════════════════════════
</code></pre></div>
<hr />
<h3 id="building-entity-core-stats-in-python">Building Entity Core Stats in Python<a class="headerlink" href="#building-entity-core-stats-in-python" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">struct</span>

<span class="k">def</span><span class="w"> </span><span class="nf">encode_fixed_point</span><span class="p">(</span><span class="n">float_value</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a float to fixed-point format (4 bytes big-endian)&quot;&quot;&quot;</span>
    <span class="n">wire_value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">float_value</span> <span class="o">*</span> <span class="mi">65536</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;&gt;i&#39;</span><span class="p">,</span> <span class="n">wire_value</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_entity_core_stats</span><span class="p">(</span><span class="n">build_time</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">build_cost</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">max_hp</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create core stats for a single entity type (12 bytes).</span>

<span class="sd">    Args:</span>
<span class="sd">        build_time: Time to build/spawn this entity (seconds or game ticks)</span>
<span class="sd">        build_cost: Resource cost to build this entity</span>
<span class="sd">        max_hp: Maximum hit points for this entity</span>

<span class="sd">    Returns:</span>
<span class="sd">        12 bytes of entity core stats</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>

    <span class="c1"># Build time (4 bytes, fixed-point)</span>
    <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">encode_fixed_point</span><span class="p">(</span><span class="n">build_time</span><span class="p">))</span>

    <span class="c1"># Build cost (4 bytes, fixed-point)</span>
    <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">encode_fixed_point</span><span class="p">(</span><span class="n">build_cost</span><span class="p">))</span>

    <span class="c1"># Max HP (4 bytes, uint32 big-endian)</span>
    <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;&gt;I&#39;</span><span class="p">,</span> <span class="n">max_hp</span><span class="p">))</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">12</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Entity stats should be 12 bytes, got </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_behavior_entity_core_stats</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create the complete Entity Core Stats section (39 entities = 468 bytes).</span>

<span class="sd">    Returns:</span>
<span class="sd">        468 bytes of entity core stats data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>

    <span class="c1"># Define stats for all 39 entity types</span>
    <span class="c1"># Format: (build_time, build_cost, max_hp)</span>
    <span class="n">entity_stats</span> <span class="o">=</span> <span class="p">[</span>
        <span class="c1"># Manned Units (indices 0-4)</span>
        <span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">),</span>   <span class="c1"># 0: Tank</span>
        <span class="p">(</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">,</span> <span class="mi">500</span><span class="p">),</span>      <span class="c1"># 1: Scout</span>
        <span class="p">(</span><span class="mf">15.0</span><span class="p">,</span> <span class="mf">150.0</span><span class="p">,</span> <span class="mi">1500</span><span class="p">),</span>   <span class="c1"># 2: Assault Platform</span>
        <span class="p">(</span><span class="mf">8.0</span><span class="p">,</span> <span class="mf">80.0</span><span class="p">,</span> <span class="mi">800</span><span class="p">),</span>      <span class="c1"># 3: Bomber</span>
        <span class="p">(</span><span class="mf">12.0</span><span class="p">,</span> <span class="mf">120.0</span><span class="p">,</span> <span class="mi">600</span><span class="p">),</span>    <span class="c1"># 4: Transport</span>

        <span class="c1"># Weapons (indices 5-18)</span>
        <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>        <span class="c1"># 5: Flak Shell</span>
        <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>        <span class="c1"># 6: Pulse Shell</span>
        <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>        <span class="c1"># 7: Short Missile</span>
        <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">25</span><span class="p">),</span>        <span class="c1"># 8: Hunter</span>
        <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span>        <span class="c1"># 9: Heavy Missile</span>
        <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>        <span class="c1"># 10: (Unknown)</span>
        <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>        <span class="c1"># 11: Piercer</span>
        <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>        <span class="c1"># 12: Thumper</span>
        <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>         <span class="c1"># 13: Caltrop</span>
        <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>       <span class="c1"># 14: Orbital Bomb</span>
        <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">75</span><span class="p">),</span>        <span class="c1"># 15: Cruise Missile</span>
        <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>        <span class="c1"># 16: Mortar Shell</span>
        <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>         <span class="c1"># 17: Flare</span>
        <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span>        <span class="c1"># 18: Aereal Bomb</span>

        <span class="c1"># Deployables (indices 19-20)</span>
        <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">25.0</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>      <span class="c1"># 19: Cargo Box</span>
        <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span>       <span class="c1"># 20: Uplink</span>

        <span class="c1"># Space Units (indices 21-24)</span>
        <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">500.0</span><span class="p">,</span> <span class="mi">5000</span><span class="p">),</span>   <span class="c1"># 21: Supply Ship</span>
        <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>        <span class="c1"># 22: Torpedo</span>
        <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>        <span class="c1"># 23: Particle Beam</span>
        <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>         <span class="c1"># 24: Space Explosion</span>

        <span class="c1"># Ground Units (indices 25-37)</span>
        <span class="p">(</span><span class="mf">20.0</span><span class="p">,</span> <span class="mf">200.0</span><span class="p">,</span> <span class="mi">500</span><span class="p">),</span>    <span class="c1"># 25: Power Cell</span>
        <span class="p">(</span><span class="mf">25.0</span><span class="p">,</span> <span class="mf">300.0</span><span class="p">,</span> <span class="mi">750</span><span class="p">),</span>    <span class="c1"># 26: Refuel Pad</span>
        <span class="p">(</span><span class="mf">25.0</span><span class="p">,</span> <span class="mf">300.0</span><span class="p">,</span> <span class="mi">750</span><span class="p">),</span>    <span class="c1"># 27: Repair Pad</span>
        <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">400.0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">),</span>   <span class="c1"># 28: Shield</span>
        <span class="p">(</span><span class="mf">20.0</span><span class="p">,</span> <span class="mf">250.0</span><span class="p">,</span> <span class="mi">600</span><span class="p">),</span>    <span class="c1"># 29: Flak Turret</span>
        <span class="p">(</span><span class="mf">20.0</span><span class="p">,</span> <span class="mf">250.0</span><span class="p">,</span> <span class="mi">600</span><span class="p">),</span>    <span class="c1"># 30: Gun Turret</span>
        <span class="p">(</span><span class="mf">35.0</span><span class="p">,</span> <span class="mf">500.0</span><span class="p">,</span> <span class="mi">800</span><span class="p">),</span>    <span class="c1"># 31: Heavy Missile Silo</span>
        <span class="p">(</span><span class="mf">25.0</span><span class="p">,</span> <span class="mf">350.0</span><span class="p">,</span> <span class="mi">700</span><span class="p">),</span>    <span class="c1"># 32: Missile Launcher</span>
        <span class="p">(</span><span class="mf">15.0</span><span class="p">,</span> <span class="mf">200.0</span><span class="p">,</span> <span class="mi">400</span><span class="p">),</span>    <span class="c1"># 33: Skypump</span>
        <span class="p">(</span><span class="mf">20.0</span><span class="p">,</span> <span class="mf">300.0</span><span class="p">,</span> <span class="mi">500</span><span class="p">),</span>    <span class="c1"># 34: Portal</span>
        <span class="p">(</span><span class="mf">25.0</span><span class="p">,</span> <span class="mf">350.0</span><span class="p">,</span> <span class="mi">600</span><span class="p">),</span>    <span class="c1"># 35: Darklight</span>
        <span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>    <span class="c1"># 36: Spy Bug</span>
        <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>       <span class="c1"># 37: Decoration</span>

        <span class="c1"># Placeholder (index 38)</span>
        <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>         <span class="c1"># 38: ILLEGAL</span>
    <span class="p">]</span>

    <span class="c1"># Generate data for all 39 entities</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">build_time</span><span class="p">,</span> <span class="n">build_cost</span><span class="p">,</span> <span class="n">max_hp</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">entity_stats</span><span class="p">):</span>
        <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">create_entity_core_stats</span><span class="p">(</span><span class="n">build_time</span><span class="p">,</span> <span class="n">build_cost</span><span class="p">,</span> <span class="n">max_hp</span><span class="p">))</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">468</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Entity core stats should be 468 bytes, got </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div>
<hr />
<h3 id="simplified-version-all-zeros">Simplified Version (All Zeros)<a class="headerlink" href="#simplified-version-all-zeros" title="Permanent link">&para;</a></h3>
<p>For initial testing, you can send all zeros:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_empty_entity_core_stats</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create 468 bytes of empty entity core stats (all zeros).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">bytes</span><span class="p">(</span><span class="mi">468</span><span class="p">)</span>
</code></pre></div>
<p>This is valid but means:
- All entities have 0 build time
- All entities have 0 build cost
- All entities have 0 max HP (may cause issues!)</p>
<p><strong>Warning</strong>: Setting max_hp to 0 may cause division-by-zero errors in health calculations. Consider using at least <code>max_hp=1</code> for all entities.</p>
<hr />
<h3 id="example-entity-stats-bytes">Example Entity Stats Bytes<a class="headerlink" href="#example-entity-stats-bytes" title="Permanent link">&para;</a></h3>
<p>Here's an example for the Tank entity (index 0):</p>
<div class="highlight"><pre><span></span><code>Entity 0 (Tank) with build_time=10.0, build_cost=100.0, max_hp=1000:

Offset 0-3:   00 0A 00 00    Build time: 10.0 (10.0 × 65536 = 655,360 = 0x000A0000)
Offset 4-7:   00 64 00 00    Build cost: 100.0 (100.0 × 65536 = 6,553,600 = 0x00640000)
Offset 8-11:  00 00 03 E8    Max HP: 1000 (0x000003E8)

Total: 12 bytes
</code></pre></div>
<hr />
<h3 id="common-mistakes">Common Mistakes<a class="headerlink" href="#common-mistakes" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Mistake</th>
<th>Symptom</th>
<th>Fix</th>
</tr>
</thead>
<tbody>
<tr>
<td>Wrong entity count</td>
<td>Corruption of next section</td>
<td>Send exactly 39 entities</td>
</tr>
<tr>
<td>Max HP = 0</td>
<td>Division by zero, crashes</td>
<td>Use at least 1 for all entities</td>
</tr>
<tr>
<td>Little-endian encoding</td>
<td>Garbled values</td>
<td>Use big-endian (<code>&gt;I</code>)</td>
</tr>
<tr>
<td>Missing fixed-point</td>
<td>Build values 65536× wrong</td>
<td>Multiply by 65536</td>
</tr>
<tr>
<td>Wrong total size</td>
<td>Data misalignment</td>
<td>Verify exactly 468 bytes</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="verification-checklist">Verification Checklist<a class="headerlink" href="#verification-checklist" title="Permanent link">&para;</a></h3>
<p>Before moving to Section 4, verify:</p>
<ul>
<li>[ ] Exactly 39 entities</li>
<li>[ ] Exactly 12 bytes per entity</li>
<li>[ ] Total size is exactly 468 bytes</li>
<li>[ ] Build time: fixed-point encoded (4 bytes)</li>
<li>[ ] Build cost: fixed-point encoded (4 bytes)</li>
<li>[ ] Max HP: uint32 big-endian (4 bytes)</li>
<li>[ ] Max HP &gt; 0 for all damageable entities</li>
</ul>
<hr />
<h3 id="section-summary">Section Summary<a class="headerlink" href="#section-summary" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Section Number</td>
<td>3</td>
</tr>
<tr>
<td>Handler Function</td>
<td>FUN_004e4a80</td>
</tr>
<tr>
<td>Entity Count</td>
<td>39 (fixed)</td>
</tr>
<tr>
<td>Bytes per Entity</td>
<td>12</td>
</tr>
<tr>
<td>Total Section Size</td>
<td>468 bytes (fixed)</td>
</tr>
<tr>
<td>Position After</td>
<td>Entity Weapon Data (offset 2,435)</td>
</tr>
<tr>
<td>Position Before</td>
<td>Vehicle Type Data</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="cumulative-offset-after-section-3">Cumulative Offset After Section 3<a class="headerlink" href="#cumulative-offset-after-section-3" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>After Section 3:
  Fixed Header:        95 bytes
  Entity Weapon Data:  2,340 bytes
  Entity Core Stats:   468 bytes
  ─────────────────────────────
  Total:               2,903 bytes
</code></pre></div>
<hr />
<p><em>Previous: <a href="part-4-2-entity-weapon-data.html">Part 4-2: BEHAVIOR - Entity Weapon Data</a></em><br />
<em>Next: <a href="part-4-4-vehicle-type-data.html">Part 4-4: BEHAVIOR - Vehicle Type Data</a></em></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.sections", "navigation.indexes", "search.suggest", "search.highlight", "content.code.copy", "navigation.top"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>